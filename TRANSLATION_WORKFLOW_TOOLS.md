# 翻訳作業効率化ツールガイド

このドキュメントでは、FTCドキュメントの日本語翻訳作業を効率的に進めるための推奨ツールと、作業支援スクリプトの使用方法について説明します。

---

## 📚 目次

1. [推奨ツールとワークフロー](#推奨ツールとワークフロー)
2. [作業支援Pythonスクリプト](#作業支援pythonスクリプト)
3. [品質保証とレビュープロセス](#品質保証とレビュープロセス)

---

## 推奨ツールとワークフロー

### 1. テキストエディタ / IDE

#### Visual Studio Code (推奨)
- **利点:**
  - reStructuredText (RST) プレビュー機能
  - Git統合
  - マルチカーソル編集
  - 正規表現による検索・置換
- **推奨拡張機能:**
  - `reStructuredText` - RST構文ハイライトとプレビュー
  - `GitLens` - Git履歴の可視化
  - `Code Spell Checker` - スペルチェック（日本語対応版も利用可能）
  - `Japanese Language Pack` - 日本語UI
- **設定のコツ:**
  - RST ファイルに対して自動保存を有効化
  - タブサイズを3スペースに設定（本プロジェクトの標準）

#### その他のオプション
- **PyCharm** - Python開発に慣れている場合
- **Sublime Text** - 軽量で高速
- **Vim/Emacs** - コマンドライン派向け

### 2. 翻訳支援ツール

#### DeepL (推奨)
- **用途:** 初稿翻訳、専門用語の確認
- **利点:**
  - 自然な日本語訳
  - 技術文書の翻訳精度が高い
- **注意点:**
  - **必ず人間によるレビューと修正が必要**
  - コードブロックは翻訳しない
  - API名やクラス名は英語のまま残す

#### Google Translate
- **用途:** セカンドオピニオン、専門用語の確認
- **利点:** 無料、迅速

#### Weblio / 英辞郎
- **用途:** 専門用語の確認、ニュアンスの理解
- **利点:** 技術用語の訳例が豊富

### 3. バージョン管理とコラボレーション

#### Git + GitHub
- **ワークフロー:**
  1. `docs-ja` ブランチから作業ブランチを作成
  2. 翻訳作業を実施
  3. 小まめにコミット（1ファイルまたは1セクションごと）
  4. プルリクエスト(PR)を作成してレビューを依頼
- **コミットメッセージの例:**
  - `Translate programming_resources/imu/imu.rst`
  - `Fix typos in persona_pages/mentor_tech/mentor_tech.rst`
  - `Update terminology for consistency`

### 4. 翻訳進捗管理

#### GitHub Issues / Projects
- **用途:** タスク管理、進捗追跡
- **推奨方法:**
  - 作業開始時にIssueを作成または割り当て
  - 進捗状況をコメントで更新
  - 完了時にIssueをクローズ

#### TRANSLATION_ROADMAP.md
- **用途:** 全体的な進捗確認
- **使い方:**
  - 翻訳完了したら該当項目に `[x]` マークを付ける
  - 定期的に全体の進捗を確認

#### TRANSLATION_PROGRESS.md (自動生成)
- **用途:** リアルタイムの翻訳完了状況確認
- **特徴:**
  - Pythonスクリプトにより自動生成
  - 英語が残っているファイルを検出
  - 完全に日本語化されたファイルを確認

---

## 作業支援Pythonスクリプト

### 1. 翻訳進捗チェッカー (`check_translation_progress.py`)

#### 機能
- 全てのRSTファイルを自動スキャン
- 日本語への翻訳が完了しているかを判定
- 英語が残っている箇所を検出（特に文中・文末の混在を検出）
- 結果を `TRANSLATION_PROGRESS.md` に出力（上書きモード）

#### 使用方法

```bash
# リポジトリのルートディレクトリで実行
python docs/scripts/check_translation_progress.py

# 出力ファイルを確認
cat TRANSLATION_PROGRESS.md
```

#### 出力内容
- **翻訳完了ファイル:** 完全に日本語化されたファイルのリスト
- **翻訳未完了ファイル:** 英語が残っているファイルのリスト
  - ファイル名
  - 英語が残っている行番号
  - 問題箇所の例
- **統計情報:**
  - 総ファイル数
  - 翻訳完了ファイル数
  - 翻訳完了率

#### 検出アルゴリズムの特徴
- **日本語文字の検出:** ひらがな、カタカナ、漢字の存在を確認
- **英文の検出:** 連続した英単語や英文パターンを検出
- **混在パターンの検出:**
  - 文中に英語が残っているパターン
  - 文末だけ英語のパターン
  - 見出しが英語のまま残っているパターン
- **除外項目:**
  - コードブロック内の英語
  - URL
  - RSTディレクティブ（`:doc:`, `:ref:` など）
  - **GLOSSARY.mdから自動読み込みされた技術用語**（OpMode、Control Hub、IMU など）
  - API名やクラス名（GLOSSARY.mdで定義された用語として許容）

#### 定期実行の推奨
翻訳作業の進捗を継続的に確認するため、以下のタイミングでスクリプトを実行することを推奨します：
- 翻訳作業開始時
- ファイル完了後
- PRを作成する前
- チーム全体での進捗確認時

### 2. その他の既存スクリプト

#### `imagesizechecker.py`
- **用途:** 画像ファイルサイズの検証
- **実行タイミング:** 画像を追加・変更した場合

#### `convertWebp.py`
- **用途:** WebP形式への画像変換
- **実行タイミング:** 画像を最適化する場合

---

## 品質保証とレビュープロセス

### 翻訳作業の基本フロー

1. **準備**
   - `TRANSLATION_GUIDE.md` を熟読
   - `GLOSSARY.md` で用語統一ルールを確認
   - `TRANSLATION_ROADMAP.md` で作業対象を確認

2. **翻訳作業**
   - 作業ブランチを作成
   - RSTファイルを翻訳
   - 小まめにコミット
   - 翻訳支援ツール（DeepLなど）を活用するが、**必ず人間がレビューして修正**

3. **セルフレビュー**
   - 翻訳進捗チェッカーを実行
   - 検出された問題を修正
   - 用語統一ルールに従っているか確認
   - コードブロックや技術用語が正しく保持されているか確認

4. **PR作成とレビュー**
   - PRを作成
   - レビュアーを割り当て
   - フィードバックに基づいて修正
   - 承認後にマージ

### よくある翻訳ミスと対策

#### 1. 文中に英語が残る
- **問題例:** 「このセクションでは how to configure the IMU を説明します。」
- **対策:** 翻訳後に全文を通読し、英語が混在していないか確認

#### 2. 文末だけ英語のまま
- **問題例:** 「IMUは以下の機能を提供します: rotation measurement and heading control.」
- **対策:** 文末まで翻訳されているか特に注意

#### 3. 技術用語の過剰な翻訳
- **問題例:** `OpMode` を「操作モード」と訳す
- **対策:** `GLOSSARY.md` で和訳しない用語をチェック

#### 4. コードブロックの翻訳
- **問題例:** コメント以外のコードを翻訳してしまう
- **対策:** コードブロック内は原則として英語のまま（コメントのみ翻訳可）

#### 5. RSTディレクティブの破損
- **問題例:** `:doc:` を `:ドキュメント:` と訳す
- **対策:** RSTの構文要素は翻訳しない

### レビュー時のチェックリスト

- [ ] 用語統一ルール（`GLOSSARY.md`）に従っているか
- [ ] 「です・ます」調で統一されているか
- [ ] API名やクラス名が太字で英語のまま保持されているか
- [ ] コードブロックが正しく保持されているか
- [ ] RSTの構文が正しく動作するか
- [ ] 翻訳進捗チェッカーでエラーが検出されないか
- [ ] 原文の意味が正確に伝わっているか

---

## チーム協力のベストプラクティス

### 1. コミュニケーション
- 作業開始時にIssueやチャットで宣言
- 同じファイルの重複作業を避ける
- 用語の解釈に迷ったら相談

### 2. 進捗の可視化
- `TRANSLATION_PROGRESS.md` を定期的に更新
- PRをこまめに作成してレビューを回す
- 完了したフェーズは `PHASE*_SUMMARY.md` としてまとめる

### 3. 品質の維持
- 急がず、正確な翻訳を心がける
- 機械翻訳に頼りすぎない
- レビューを積極的に行い、フィードバックを共有

---

## トラブルシューティング

### Q: 翻訳進捗チェッカーで誤検出される
**A:** 以下の可能性があります：
- 技術用語として英語を残すべき箇所が検出されている → 意図的な場合は問題なし
- コードブロックが正しく認識されていない → コードブロックの記法を確認

### Q: RSTのビルドが失敗する
**A:** 以下を確認：
- インデントが正しいか（3スペース）
- RSTディレクティブの構文が正しいか
- リンクのパスが正しいか

### Q: 用語の統一方法が分からない
**A:** 以下を参照：
1. `GLOSSARY.md` - 既存の用語統一リスト
2. `TRANSLATION_GUIDE.md` - 翻訳ガイドライン
3. 既に翻訳済みのファイル - 実例を確認
4. チームメンバーに相談

---

## まとめ

このガイドで紹介したツールとワークフローを活用することで、翻訳作業を効率的かつ高品質に進めることができます。特に **翻訳進捗チェッカー** を定期的に実行し、英語の残りを早期に検出することで、レビュー時間を大幅に削減できます。

チーム全体で協力し、一貫性のある高品質な日本語ドキュメントを作成しましょう！
