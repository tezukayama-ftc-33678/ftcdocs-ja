例：ファイルの読み書きアクセス
===============================

通常の **Blocks**の現在のバージョン（**SDK**7.0）では、自動ログまたはマッチログファイルエントリ以外に、** 外部ファイルへの読み書きアクセス**を提供していません。ファイルアクセスは有用な機能であり、これまでのところ Java プログラマーのみが利用できます。**myBlocks** を使用すれば可能です！

ここでは、**myBlocks**のペアの例を示します。1つの**myBlock**は数値を指定されたファイル名に** 書き込み**、コンパニオン**myBlock**は後でその値を同じファイルから** 読み取る** ことができます。

.. image:: images/a0550-file-access-Blocks.png

ファイルは **Control Hub**または RC スマートフォンの FIRST/settings フォルダーに保存されます。RC アプリ、**OpModes** 、およびその他のファイルとは別に存在します。

書き込みおよび読み取りアクションは、同じ **OpMode**または** 異なる OpModes** で発生でき、さまざまなシナリオが可能です：

-  **Autonomous**が**TeleOp** に情報を渡します。たとえば、センサーまたはエンコーダーの最新の値は何でしたか？

-  特別な**セットアップ OpMode** により、ゲームパッド入力で自律戦略を選択し、重要なパラメーターを調整できます。ロボットはその後長時間アイドル状態になり、電源がオフになる可能性もあります。試合が始まると、**Autonomous** **OpMode** はそれらの設定を読み取り、選択/調整されたアクションを実装します。

-  **専用ログファイル** は、オプションのタイムスタンプを使用して、カスタム形式で主要なセンサーデータを報告します。プログラム開発とデバッグの場合、これは大規模な標準ログまたはマッチログを操作するよりも効率的です。

この例の Java コードは、いくつかの馴染みのない Java 式を説明する**広範なコメント** とともに、以下で入手できます。コードは**OnBot Java**または**Android Studio** に直接コピーして貼り付けることができます。

   プログラミングのヒント：可能なすべての Java コマンドを暗記する代わりに、プログラマーは類似のタスクの既存のコードを研究および変更することがよくあります。馴染みのないコマンドは、インターネット検索、参考書、`Javadoc リファレンス <https://javadoc.io/doc/org.firstinspires.ftc>`__、または公式の `Oracle Javadoc <https://docs.oracle.com/javase/7/docs/api/>`__ で調べられます。

この簡単な例では、ファイル名ごとに単一の数値のみをサポートしています。より良いバージョンでは、複数の値とデータ型が可能になります - 優れたプログラミングの課題です！

**ループ内に myBlocks を配置する** ことに注意してください。現在の例を拡張すると、**myBlock**はファイルから大量の（変更されない）データを読み取る可能性があります。**OpMode** がそのデータを一度だけ必要とする場合、ループ内でファイルを読み取ると、サイクル時間が無駄に追加され、破損または中断された読み取り操作のリスクが高まる可能性があります。

.. image:: images/a0570-do-not-read-in-loop-Blocks.png

代わりに、ファイルを一度読み取り、関連するデータを変数または配列に保存します。次に、ループ内で必要に応じて変数を処理します。

.. image:: images/a0560-read-once-Blocks.png

データが変化せず、一度だけ必要な場合、同じ提案がセンサーとエンコーダーの読み取りにも適用される可能性があります。

.. dropdown:: サンプルコード

   :download:`SampleMyBlocks_v05.java <opmodes/SampleMyBlocks_v05.java>`

   .. literalinclude:: opmodes/SampleMyBlocks_v05.java
      :language: java
