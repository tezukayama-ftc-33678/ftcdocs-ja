色空間
============

概要
--------

このFTCカラー処理チュートリアルのページでは、**色空間**について紹介します。

**OpenCV**は、いくつかの色空間のいずれかを使用して色情報を処理できます。色空間とは、正確な色合いと明るさを記述する方法です。

このページでは、FTC SDKで利用可能な3つの選択肢について説明します：

* RGB（赤、緑、青）
* HSV（色相、彩度、明度）
* YCrCb（輝度、クロミナンス赤、クロミナンス青）

各色空間は、0から255までの3つの数値を使用して特定の色を記述します。

RGB色空間
---------------

**RGB**は一般的な色空間で、理解しやすいです。3つのコンポーネントは以下の通りです：

* **赤** (0 - 255)
* **緑** (0 - 255)
* **青** (0 -  255)

.. figure:: images/10-RGB-wheel.png
   :width: 75%
   :align: center
   :alt: RGBカラーホイール

   RGBカラーホイール

純粋な赤は、赤255、緑0、青0の値を持ちます。純粋な緑は、赤0、緑255、青0です。

マゼンタは赤と青のブレンドなので、赤255、緑0、青255の値になります。

以下は、RGB色空間を視覚化する便利な方法で、各コンポーネントに1つの軸があります：

.. figure:: images/20-RGB-cube.png
   :width: 75%
   :align: center
   :alt: RGB立方体の視覚化

   RGB立方体の視覚化

この立方体の各手前側の外面は、1つのコンポーネントの最大値を持っています。例えば、上面のすべての色は、青のコンポーネントが255です。

最も近い角は**白**で、RGBの値は(255, 255, 255)です。つまり、赤、緑、青の光の最大値を組み合わせると、白い光として現れます。

では**黒**はどこにあるでしょうか？それは反対側の角、原点にあり、この図では隠れています。その値は(0, 0, 0)で、色がまったくない状態です。

このRGBシステムは、ビデオを含む光ベースの色にのみ使用されます。塗料の色や印刷の色には適用されません。それらは他の色システムを使用します。

.. tip::
   赤い絵の具、緑の絵の具、青い絵の具を混ぜても、白い絵の具にはなり**ません**！

技術情報は`Wikipediaの色空間 <https://en.wikipedia.org/wiki/RGB_color_spaces>`_で入手できます。

HSV色空間
---------------

**OpenCV**が使用する別の色空間は**HSV**です：色相（Hue）、彩度（Saturation）、明度（Value）。

.. figure:: images/30-HSV-cone.png
   :width: 75%
   :align: center
   :alt: HSV円錐の視覚化

   HSV円錐の視覚化

**色相（Hue）**は実際の色の色合いです。上部の馴染みのあるカラーホイールを参照してください。

**彩度（Saturation）**は白の量を測定します。値が低いほど白っぽく、またはより灰色です。HSV円錐上で、彩度の外向きの矢印を参照してください。最高値の255は完全に彩度の高い色（白がない）です。

**明度（Value）**は明るさを測定します。HSV円錐の上向きの矢印を参照してください。円錐の上面（明度 = 255）は完全に明るい色です。黒は下端、明度 = 0にあります。

技術情報は`WikipediaのHSL/HSV <https://en.wikipedia.org/wiki/HSL_and_HSV>`_で入手できます。

YCrCb色空間
-----------------

**OpenCV**が使用する3番目の色空間は**YCrCb**です。

.. figure:: images/40-YCrCb.png
   :width: 75%
   :align: center
   :alt: YCrCbの視覚化

   YCrCbの視覚化

Yは**輝度（Luminance）**または明るさで、CrとCbは**クロミナンス（Chrominance）**の赤と青のコンポーネントです。技術情報は`WikipediaのYCbCr <https://en.wikipedia.org/wiki/YCbCr>`_で入手できます。

YCrCb色空間は、カラー処理の効率的な計算を提供し、ビデオアプリケーションで広く使用されています。

一部のオンラインドキュメントでは、**YCbCr**と呼ばれる色空間を参照しています。これは同じシステムで、最後の2つの値が逆になっています。

どのように選択すればよいですか？
--------------

皆さんにとって便利な色空間を使用してください。RGBは理解しやすく、YCrCbは（必要に応じて）より優れた計算パフォーマンスを提供する可能性があります。

ある色空間の3つの値を別の色空間の対応する3つの値に変換する無料の公開ウェブサイトを簡単に見つけることができます。

HSVに変換する際、一部のオンラインサイトでは、色相を度数（0から360）で、彩度と明度をパーセンテージ（0から100）で示します。FTCの**Color Locator**プロセッサで使用する値については、これらを（最大値の比率として）255に適用してください。

**Color Locator**プロセッサは、これら3つの色空間のいずれかを使用できます。シンプルな**Color Sensor**プロセッサは内部でYCrCbを使用しますが、結果はRGBのみで報告されます。

============

*質問、コメント、修正は westsiderobotics@verizon.net まで*

